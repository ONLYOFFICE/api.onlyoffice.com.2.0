@custom-media --temp-chapter-viewport-width-xlarge (width >= 1206px);

.chapter {
  --temp-chapter-breakpoint-xlarge: calc(var(--size-breakpoint-xlarge) - 74px);

  --chapter-navigation-border-width: var(--size-border-width-thin);
  --chapter-navigation-content-width: calc(232px - var(--chapter-navigation-border-width));
  --chapter-navigation-padding-block: var(--base-size-32);
  --chapter-navigation-padding-inline: var(--base-size-32);
  --chapter-navigation-width: calc(var(--chapter-navigation-content-width) + var(--chapter-navigation-padding-inline) * 2 + var(--chapter-navigation-border-width));

  --chapter-content-padding-block: var(--base-size-32);
  --chapter-content-padding-inline: var(--base-size-16);
  --chapter-content-max-width: calc(var(--temp-chapter-breakpoint-xlarge) - var(--chapter-navigation-width));

  display: grid;
  grid-template-columns: minmax(0, 1fr);

  @media (--size-viewport-width-small) {
    --chapter-content-padding-inline: var(--base-size-24);
  }

  @media (--size-viewport-width-medium) {
    --chapter-content-padding-inline: var(--base-size-40);

    grid-template-columns:
      var(--chapter-navigation-width)
      minmax(0, var(--chapter-content-max-width));
  }

  @media (--temp-chapter-viewport-width-xlarge) {
    grid-template-columns:
      auto
      var(--chapter-navigation-width)
      minmax(0, var(--chapter-content-max-width))
      auto;
  }
}

.chapter[state-navigation-visible] .chapter__navigation,
.chapter:state(navigation-visible) .chapter__navigation {
  display: block;
}

.chapter::before {
  background-color: var(--color-background-muted);
  display: block;
  grid-column: 1 / 3;
  grid-row: 1;

  @media (--temp-chapter-viewport-width-xlarge) {
    content: "";
  }
}

.chapter::after {
  background-color: var(--color-background-default);
  display: block;
  grid-column: 3 / 5;
  grid-row: 1;
  order: -1;

  @media (--temp-chapter-viewport-width-xlarge) {
    content: "";
  }
}

.chapter__navigation {
  background-color: var(--color-background-muted);
  border-inline-end-color: var(--color-border-muted);
  border-inline-end-style: solid;
  border-inline-end-width: var(--chapter-navigation-border-width);
  display: none;
  grid-column: 1;
  grid-row: 1;
  padding-block: var(--chapter-navigation-padding-block);
  padding-inline: var(--chapter-navigation-padding-inline);

  @media (--size-viewport-width-medium) {
    display: block;
  }

  @media (--temp-chapter-viewport-width-xlarge) {
    grid-column: 2;
  }
}

.chapter__content {
  background-color: var(--color-background-default);
  display: flex;
  flex-direction: column;
  grid-column: 1;
  grid-row: 1;
  padding-block: var(--chapter-content-padding-block);
  padding-inline: var(--chapter-content-padding-inline);

  @media (--size-viewport-width-medium) {
    grid-column: 2;
  }

  @media (--temp-chapter-viewport-width-xlarge) {
    grid-column: 3;
  }
}

/* Integration with body */

body:has(.chapter[state-navigation-visible]),
body:has(.chapter:state(navigation-visible)) {
  overflow: hidden;
}

/* Integration with @onlyoffice/site-search */

.chapter .search {
  margin-block-end: var(--base-size-32);
}

.chapter .search .text-input {
  min-inline-size: 100%;
}

/* Integration with @onlyoffice/ui-breadcrumb */

.chapter__content .breadcrumb {
  padding-block: var(--base-size-8);
}

/* Integration with @onlyoffice/ui-content */

.chapter__content .content {
  margin-block-start: var(--base-size-28);
}

.chapter__content .content::after {
  content: "";
  display: block;
  padding-block-start: calc(var(--base-size-48) + var(--base-size-64));

  @media (--size-viewport-width-medium) {
    padding-block-start: calc(var(--base-size-64) + var(--base-size-64));
  }

  @media (--size-viewport-width-large) {
    padding-block-start: calc(var(--base-size-112) + var(--base-size-64));
  }
}

/* Integration with @onlyoffice/site-help */

.chapter__content .help {
  border-block-start-color: var(--color-border-muted);
  border-block-start-style: solid;
  border-block-start-width: var(--size-border-width-thin);
  margin-block-start: auto;
  padding-block-start: var(--base-size-32);
}
