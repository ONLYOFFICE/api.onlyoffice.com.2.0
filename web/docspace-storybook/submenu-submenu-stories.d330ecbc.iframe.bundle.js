"use strict";(self.webpackChunk_docspace_components=self.webpackChunk_docspace_components||[]).push([[9097],{"./submenu/submenu.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>submenu_stories});var prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),react=__webpack_require__("../../node_modules/react/index.js"),device=__webpack_require__("./utils/device.js"),domHelpers=__webpack_require__("./utils/domHelpers.js");const wrapperPadding=domHelpers.Z.getViewport()<=device.tablet?16:20,countAutoOffset=(data,submenuItemsRef)=>{const[marker,itemsAndGaps,itemOnMarker]=countParams(data,submenuItemsRef);return void 0===itemOnMarker?0:"gap"===itemOnMarker.type&&itemOnMarker!==itemsAndGaps[itemsAndGaps.length-1]?itemOnMarker.end-marker+32-wrapperPadding:"item"===itemOnMarker.type&&marker-itemOnMarker.start<32?-(marker-itemOnMarker.start-32)-wrapperPadding:"item"===itemOnMarker.type&&itemOnMarker.end-marker<7.5&&itemOnMarker!==itemsAndGaps[itemsAndGaps.length-2]?itemOnMarker.end-marker+64-wrapperPadding:0},countAutoFocus=(itemId,data,submenuItemsRef)=>{const[marker,itemsAndGaps,itemOnMarker]=countParams(data,submenuItemsRef),[focusedItem]=itemsAndGaps.filter((obj=>obj.id===itemId)),submenuWidth=submenuItemsRef.current.offsetWidth;return itemOnMarker?.id&&focusedItem.id===itemOnMarker.id?focusedItem.end-marker:focusedItem.start<marker-submenuWidth||focusedItem.start-32<marker-submenuWidth?focusedItem.start-marker+submenuWidth-wrapperPadding-32:0},countParams=(data,submenuItemsRef)=>{const refCurrent=submenuItemsRef.current,texts=data.map((d=>countText(d.name))),itemsAndGaps=countItemsAndGaps(texts),submenuWidth=refCurrent.offsetWidth,marker=refCurrent.scrollLeft+submenuWidth-wrapperPadding,[itemOnMarker]=itemsAndGaps.filter((obj=>obj.start<marker&&marker<obj.end));return[marker,itemsAndGaps,itemOnMarker]},countText=text=>{const inputText=text,context=document.createElement("canvas").getContext("2d");return context.font="600 13px open sans",{id:text,width:context.measureText(inputText).width}},countItemsAndGaps=texts=>{const result=[];return texts.forEach((({id,width})=>{if(result.length){const lastItem=result[result.length-1];result.push({type:"gap",length:32,start:lastItem.end,end:lastItem.end+28+4},{id,type:"item",length:width,start:lastItem.end+28+4,end:lastItem.end+28+4+width})}else result.push({type:"gap",length:14,start:0,end:14+wrapperPadding},{id,type:"item",length:width,start:14,end:14+width})})),result.push({type:"gap",length:14,start:result[result.length-1].end,end:result[result.length-1].end+14+wrapperPadding}),result};var styled_submenu=__webpack_require__("./submenu/styled-submenu.js"),ColorTheme=__webpack_require__("./ColorTheme/index.js"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js");const Submenu=props=>{const{data,startSelect=0,forsedActiveItemId,onSelect,topProps,...rest}=props;if(!data)return null;const[currentItem,setCurrentItem]=(0,react.useState)(data[startSelect]||startSelect||null);(0,react.useEffect)((()=>(window.addEventListener("popstate",onCheckCurrentItem),onCheckCurrentItem(),()=>{window.removeEventListener("popstate",onCheckCurrentItem)})),[]);const onCheckCurrentItem=(0,react.useCallback)((()=>{const isSelect=data.find((item=>window.location.pathname.endsWith(item.id)));isSelect&&setCurrentItem(isSelect)}),[data,setCurrentItem]),submenuItemsRef=(0,react.useRef)(),selectSubmenuItem=e=>{if(!forsedActiveItemId){const item=data.find((el=>el.id===e.currentTarget.id));item&&setCurrentItem(item);const offset=countAutoFocus(item.name,data,submenuItemsRef);submenuItemsRef.current.scrollLeft+=offset,onSelect&&onSelect(item)}};return(0,react.useEffect)((()=>{if(!submenuItemsRef.current)return;let startX,scrollLeft,isDown=!1;const mouseDown=e=>{e.preventDefault(),isDown=!0,startX=e.pageX-submenuItemsRef.current.offsetLeft,scrollLeft=submenuItemsRef.current.scrollLeft},mouseMove=e=>{if(!isDown)return;e.preventDefault();const walk=e.pageX-submenuItemsRef.current.offsetLeft-startX;submenuItemsRef.current.scrollLeft=scrollLeft-walk},mouseUp=()=>{const offset=countAutoOffset(data,submenuItemsRef);submenuItemsRef.current.scrollLeft+=offset,isDown=!1},mouseLeave=()=>isDown=!1;return submenuItemsRef.current.addEventListener("mousedown",mouseDown),submenuItemsRef.current.addEventListener("mousemove",mouseMove),submenuItemsRef.current.addEventListener("mouseup",mouseUp),submenuItemsRef.current.addEventListener("mouseleave",mouseLeave),()=>{submenuItemsRef.current?.removeEventListener("mousedown",mouseDown),submenuItemsRef.current?.removeEventListener("mousemove",mouseMove),submenuItemsRef.current?.removeEventListener("mouseup",mouseUp),submenuItemsRef.current?.removeEventListener("mouseleave",mouseLeave)}}),[submenuItemsRef]),(0,jsx_runtime.jsxs)(styled_submenu.so,{...rest,topProps,children:[(0,jsx_runtime.jsxs)("div",{className:"sticky",children:[(0,jsx_runtime.jsxs)(styled_submenu.VM,{children:[(0,jsx_runtime.jsx)(styled_submenu.Gu,{}),(0,jsx_runtime.jsx)(styled_submenu.Co,{children:(0,jsx_runtime.jsx)(styled_submenu.sR,{ref:submenuItemsRef,role:"list",children:data.map((d=>{const isActive=d.id===(forsedActiveItemId||currentItem.id);return(0,jsx_runtime.jsxs)(styled_submenu.E6,{id:d.id,onClick:e=>{d.onClick&&d.onClick(),selectSubmenuItem(e)},children:[(0,jsx_runtime.jsx)(styled_submenu.rM,{isActive,children:(0,jsx_runtime.jsx)(ColorTheme.U,{...props,as:"div",themeId:ColorTheme.f.SubmenuText,className:"item-text",fontSize:"13px",fontWeight:"600",truncate:!1,isActive,children:d.name})}),(0,jsx_runtime.jsx)(ColorTheme.U,{...props,themeId:ColorTheme.f.SubmenuItemLabel,isActive})]},d.id)}))})})]}),(0,jsx_runtime.jsx)(styled_submenu.kc,{className:"bottom-line"})]}),(0,jsx_runtime.jsx)("div",{className:"sticky-indent"}),(0,jsx_runtime.jsx)(styled_submenu.BM,{children:currentItem.content})]})};Submenu.displayName="Submenu",Submenu.propTypes={data:prop_types_default().arrayOf(prop_types_default().object.isRequired).isRequired,startSelect:prop_types_default().oneOfType([prop_types_default().object,prop_types_default().number]),forsedActiveItemId:prop_types_default().any,onSelect:prop_types_default().func},Submenu.__docgenInfo={description:"",methods:[],displayName:"Submenu",props:{data:{description:"List of the elements",type:{name:"arrayOf",value:{name:"object"}},required:!0},startSelect:{description:"Specifies the first item or the item's index to be displayed in the submenu.",type:{name:"union",value:[{name:"object"},{name:"number"}]},required:!1},forsedActiveItemId:{description:"Property that allows explicitly selecting content passed through an external operation",type:{name:"any"},required:!1},onSelect:{description:"Sets a callback function that is triggered when the submenu item is selected",type:{name:"func"},required:!1}}};const submenu=Submenu;var file_input=__webpack_require__("./file-input/index.js"),row=__webpack_require__("./row/index.js"),text_0=(__webpack_require__("./textarea/index.js"),__webpack_require__("./text/index.js"));const data=[{id:"Overview",name:"Overview",content:(0,jsx_runtime.jsx)(file_input.Z,{accept:".doc, .docx",id:"file-input-id",name:"demoFileInputName",onInput:()=>{},placeholder:"Input file"})},{id:"Documents",name:"Documents",content:(0,jsx_runtime.jsx)("p",{children:"Documents"})},{id:"Milestones",name:"Milestones",content:(0,jsx_runtime.jsx)(row.Z,{checked:!0,contextOptions:[{key:"key1",label:"Edit",onClick:()=>{}},{key:"key2",label:"Delete",onClick:function noRefCheck(){}}],onRowClick:function noRefCheck(){},onSelect:function noRefCheck(){},children:(0,jsx_runtime.jsx)("div",{style:{alignItems:"center",justifyContent:"space-between",display:"flex"},children:(0,jsx_runtime.jsx)(text_0.Z,{truncate:!0,children:"Sample text"})})},"1")},{id:"Time tracking",name:"Time tracking",content:(0,jsx_runtime.jsx)("p",{children:"Time tracking"})},{id:"Contacts",name:"Contacts",content:(0,jsx_runtime.jsx)("p",{children:"Contacts"})},{id:"Team",name:"Team",content:(0,jsx_runtime.jsx)("p",{children:"Team"})}],startSelect=data[2],submenu_stories={title:"Components/Submenu",component:submenu},Wrapper=props=>(0,jsx_runtime.jsx)("div",{style:{height:"170px"},children:props.children});Wrapper.displayName="Wrapper";const Template=args=>(0,jsx_runtime.jsx)(Wrapper,{children:(0,jsx_runtime.jsx)(submenu,{...args})});Template.displayName="Template";const Default=Template.bind({});Default.args={data,startSelect},Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"args => <Wrapper>\r\n    <Submenu {...args} />\r\n  </Wrapper>",...Default.parameters?.docs?.source}}};const __namedExportsOrder=["Default"]}}]);